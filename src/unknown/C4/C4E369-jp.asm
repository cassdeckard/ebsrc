
UNKNOWN_C4E369:
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	RESERVE_STACK_SPACE_CLOBBER 26
	LOADPTR $7F0000, $06
	LDY #$0000
	LDX #$0001
	TXA
	JSL FADE_OUT_WITH_MOSAIC
	JSL PREP_FOR_IMMEDIATE_DMA
	JSL UNKNOWN_C021E6
	LDA #$0000
	STA $18
	BRA @UNKNOWN3
@UNKNOWN1:
	ASL
	TAX
	LDA .LOWORD(ENTITY_SCRIPT_TABLE),X
	CMP #$FFFF
	BEQ @UNKNOWN2
	TXA
	CLC
	ADC #.LOWORD(ENTITY_SPRITEMAP_POINTER_HIGH)
	TAX
	LDA a:.LOWORD(RAM),X
	ORA #$8000
	STA a:.LOWORD(RAM),X
@UNKNOWN2:
	LDA $18
	INC
	STA $18
@UNKNOWN3:
	CMP #$001E
	BCC @UNKNOWN1
	LDX #BATTLEBG_LAYER::NONE
	LDA #BATTLEBG_LAYER::UNKNOWN279
	JSL LOAD_BACKGROUND_ANIMATION
	LDY #$6000
	LDX #$7C00
	LDA #$0000
	JSL SET_BG3_VRAM_LOCATION
	LDA #$0062
	JSL SET_OAM_SIZE
	STZ a:.LOWORD(BG3_X_POS)
	STZ a:.LOWORD(BG3_Y_POS)
	STZ a:.LOWORD(BG2_Y_POS)
	STZ a:.LOWORD(BG2_X_POS)
	STZ a:.LOWORD(BG1_Y_POS)
	STZ a:.LOWORD(BG1_X_POS)
	JSL UPDATE_SCREEN
	LDA #$0000
	STA [$06]
	COPY_TO_VRAM1P $06, $7C00, $800, $03
	.A16
	LOADPTR $7F0000, $06
	LDA #$0000
@UNKNOWN4:
	STA $0E
	LDA #$00E0
	STA $10
	MOVE_INT $06, $12
	JSL DECOMP
	.A16
	LOADPTR CAST_NAMES_GFX, $0E
	LOADPTR $7F0200, $12
	JSL DECOMP
	COPY_TO_VRAM1P $06, $6000, $2000, $00
	JSL UNKNOWN_C47F87
	.A16
	LOADPTR UNKNOWN_E1D815, $0E
	LDX #$0020
	LDA #$0208
	JSL MEMCPY16
	LOADPTR SPRITE_GROUP_PALETTES, $0E
	LDX #$0100
	LDA #$0300
	JSL MEMCPY16
	LOADPTR $E1D28A, $0E
	LOADPTR $7F7000, $12
	JSL DECOMP
	STZ .LOWORD(CUR_TEXT_PAL) + 6
	STZ .LOWORD(CUR_TEXT_PAL)
	LDY #.LOWORD(CUR_TEXT_PAL) + 2
	LDA a:.LOWORD(RAM),Y
	STA $16
	LDX #$0204
	LDA a:.LOWORD(RAM),X
	STA a:.LOWORD(RAM),Y
	LDA $16
	STA a:.LOWORD(RAM),X
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0018
	STA a:.LOWORD(UNKNOWN_7E0030)
	LDA #$0014
	STA a:.LOWORD(TM_MIRROR)
	LDA #$0016
	STA a:.LOWORD(TM_MIRROR)
	REP #PROC_FLAGS::ACCUM8
	STZ .LOWORD(UNKNOWN_7EB4CF)
	STZ .LOWORD(UNKNOWN_7EB4D1)
	JSL SET_FORCE_BLANK
	PLD
	RTL
