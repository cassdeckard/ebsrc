
UNKNOWN_C4D43F: ;$C4D43F
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	RESERVE_STACK_SPACE 24
	TAX
	STX $16
	STZ .LOWORD(UNKNOWN_7E2400)
	LOADPTR UNKNOWN_E1F44C, $0E
	JSL SET_SPRITEMAP_BANK
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA $02
	LOADPTR TOWN_MAP_ICON_PLACEMENT_PTR_TABLE, $0A
	LDX $16
	TXA
	ASL
	ASL
	CLC
	ADC $0A
	STA $0A
	DEREFERENCE_PTR_TO $0A, $06
	JMP @UNKNOWN5
@UNKNOWN0:
	LDY #$0001
	STY $14
	SEP #PROC_FLAGS::ACCUM8
	LDY #$0002
	LDA [$06],Y
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	TAX
	LDA f:UNKNOWN_E1F47A,X
	AND #$00FF
	BEQ @UNKNOWN1
	LDA .LOWORD(UNKNOWN_7EB4AE)
	CMP #$000A
	BCS @UNKNOWN1
	LDY #$0000
	STY $14
@UNKNOWN1:
	LDX #$0000
	STX $12
	LDY #$0003
	LDA [$06],Y
	CMP #$8000
	BCC @UNKNOWN2
	LDX #$0001
	STX $12
@UNKNOWN2:
	LDY #$0003
	LDA [$06],Y
	AND #$7FFF
	JSL GET_EVENT_FLAG
	LDX $12
	STX $04
	CMP $04
	BEQ @UNKNOWN3
	LDY #$0000
	STY $14
@UNKNOWN3:
	LDY $14
	BEQ @UNKNOWN4
	SEP #PROC_FLAGS::ACCUM8
	LDY #$0001
	LDA [$06],Y
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	TAY
	STY $16
	MOVE_INT $06, $0A
	LDA [$0A]
	AND #$00FF
	TAX
	STX $12
	SEP #PROC_FLAGS::ACCUM8
	LDY #$0002
	LDA [$06],Y
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	ASL
	TAX
	LDA f:UNKNOWN_E1F44C,X
	LDY $16
	LDX $12
	JSL REDIRECT_C08C58
@UNKNOWN4:
	LDA #$0005
	CLC
	ADC $06
	STA $06
@UNKNOWN5:
	MOVE_INT $06, $0A
	LDA [$0A]
	AND #$00FF
	CMP #$00FF
	BNEL @UNKNOWN0
	JSR a:.LOWORD(UNKNOWN_C4D2F0)
	LDX .LOWORD(UNKNOWN_7EB4AE)
	DEX
	STX .LOWORD(UNKNOWN_7EB4AE)
	BNE @UNKNOWN7
	LDA #$003C
	STA .LOWORD(UNKNOWN_7EB4AE)
@UNKNOWN7:
	LDA $02
	JSL SET_SPRITEMAP_BANK
	JSR a:.LOWORD(UNKNOWN_C4D2A8)
	PLD
	RTS
